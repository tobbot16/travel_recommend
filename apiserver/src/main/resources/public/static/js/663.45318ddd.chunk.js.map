{"version":3,"file":"static/js/663.45318ddd.chunk.js","mappings":"kMA4CA,QArCA,SAA2BA,GAEvB,MAAOC,IAAgBC,EAAAA,EAAAA,OAEjB,WAACC,IAAcC,EAAAA,EAAAA,KAEfC,EAAWJ,EAAaK,IAAI,QAE5BC,GAAWC,EAAAA,EAAAA,MAqBjB,OAnBAC,EAAAA,EAAAA,YAAU,MACNC,EAAAA,EAAAA,IAAeL,GAAUM,MAAKC,KAG1BC,EAAAA,EAAAA,IAAyBD,GAAaD,MAAKG,IACvCC,QAAQC,IAAI,kCACZD,QAAQC,IAAIF,GACZP,GAASU,EAAAA,EAAAA,IAAMH,IACZA,GAAUA,EAAOI,OAChBf,EAAW,kBAEXA,EAAW,IACf,GACF,GACJ,GAEF,CAACE,KAIDc,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,0BACLC,EAAAA,EAAAA,KAAA,OAAAD,SAAMf,MAGlB,C,6ECrCA,MAAMiB,EAAc,mCAEdC,EAAe,qCAKRC,EAAoBA,IAEZ,qDAA+BF,kBAA6BC,uBAOpEb,EAAiBe,UAE1B,MAEMC,EAAS,CACXC,WAAW,qBACXC,UAAWN,EACXC,aAAaA,EACbM,KAAKxB,GAOT,aAJkByB,EAAAA,EAAMC,KArBH,sCAqB0BL,EAThC,CAACM,QAAS,CAAC,eAAe,sDAWjBC,KAAKC,YAEX,EAITrB,EAA2BY,gBAElBK,EAAAA,EAAMxB,IAAI,GAAG6B,EAAAA,mCAAgDvB,MAEpEqB,I","sources":["pages/member/KakaoRedirectPage.js","api/kakaoAPI.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { getAceessToken, getMemberWithAccessToken } from '../../api/kakaoAPI';\r\nimport { useDispatch } from 'react-redux';\r\nimport { login } from '../../slices/loginSlice';\r\nimport useCustomLogin from '../../hooks/useCustomLogin';\r\n\r\nfunction KakaoRedirectPage(props) {\r\n\r\n    const [searchParams] = useSearchParams()\r\n\r\n    const {moveToPath} = useCustomLogin()\r\n\r\n    const authCode = searchParams.get('code')\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {   \r\n        getAceessToken(authCode).then(accessToken => {\r\n\r\n            \r\n            getMemberWithAccessToken(accessToken).then(result => {\r\n                console.log(\"------------------------------\")\r\n                console.log(result)\r\n                dispatch(login(result))\r\n                if(result && result.social){\r\n                    moveToPath(\"/member/modify\")\r\n                }else{\r\n                    moveToPath(\"/\")\r\n                }\r\n            })\r\n        })\r\n\r\n     }, [authCode])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div>kakao Login Redirect</div>\r\n            <div>{authCode}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default KakaoRedirectPage;","import axios from \"axios\"\r\nimport { API_SERVER_HOST } from \"./todoAPI\"\r\n\r\n\r\n\r\nconst rest_api_key= `edf84a36fd60aa13c8fe087ea7a2e02e`\r\n\r\nconst redirect_uri = `http://localhost:3000/member/kakao`\r\n\r\nconst auth_code_path = `https://kauth.kakao.com/oauth/authorize`\r\n\r\nconst access_token_url = `https://kauth.kakao.com/oauth/token`\r\nexport const getKakaoLoginLink = () => {\r\n\r\n    const kakaoURL = `${auth_code_path}?client_id=${rest_api_key}&redirect_uri=${redirect_uri}&response_type=code`\r\n\r\n    return kakaoURL\r\n\r\n\r\n}\r\n\r\nexport const getAceessToken = async(authCode) => {\r\n\r\n    const header = {headers: {\"Content-Type\":\"application/x-www-form-urlencoded;charset=utf-8\"}}\r\n\r\n    const params = {\r\n        grant_type:'authorization_code',\r\n        client_id: rest_api_key,\r\n        redirect_uri:redirect_uri,\r\n        code:authCode\r\n    }\r\n    \r\n    const res = await axios.post(access_token_url, params, header)\r\n\r\n    const accessToken = res.data.access_token\r\n\r\n    return accessToken\r\n\r\n}\r\n\r\nexport const getMemberWithAccessToken = async (accessToken) => {\r\n\r\n    const res = await axios.get(`${API_SERVER_HOST}/api/member/kakao?accessToken=${accessToken}`)\r\n\r\n    return res.data\r\n\r\n\r\n}\r\n\r\n"],"names":["props","searchParams","useSearchParams","moveToPath","useCustomLogin","authCode","get","dispatch","useDispatch","useEffect","getAceessToken","then","accessToken","getMemberWithAccessToken","result","console","log","login","social","_jsxs","children","_jsx","rest_api_key","redirect_uri","getKakaoLoginLink","async","params","grant_type","client_id","code","axios","post","headers","data","access_token","API_SERVER_HOST"],"sourceRoot":""}